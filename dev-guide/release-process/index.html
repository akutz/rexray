<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        <link rel="canonical" href="https://github.com/emccode/rexray/dev-guide/release-process/">
        <link rel="shortcut icon" href="../../favicon.png">
        

	<title>Release Process - REX-Ray</title>

        <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../css/font-awesome-4.0.3.css" rel="stylesheet">
        <link rel="stylesheet" href="../../css/highlight.css">
        <link href="../../css/base.css" rel="stylesheet">
        <link href="../../css/emccode-font.css" rel="stylesheet">
        <link href="../../css/hX.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        

        <!-- scroll fix -->
        <script>
            //var shiftWindow = function() { scrollBy(0, -40) };
            //if (location.hash) shiftWindow();
            //window.addEventListener("hashchange", shiftWindow);
        </script>

    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <!-- Main title -->
            <a class="navbar-brand" href="../..">
                <i class="fa icon-rexray-logo"></i>
                REX-Ray
            </a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            <!-- Main navigation -->
            <ul class="nav navbar-nav">
            
            
                <li >
                    <a href="../..">Home</a>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">User Guide <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../../user-guide/installation/">Installation</a>
                        </li>
                    
                        <li >
                            <a href="../../user-guide/config/">Configuration</a>
                        </li>
                    
                        <li >
                            <a href="../../user-guide/storage-providers/">Storage Providers</a>
                        </li>
                    
                        <li >
                            <a href="../../user-guide/schedulers/">Schedulers</a>
                        </li>
                    
                        <li >
                            <a href="../../user-guide/applications/">Applications</a>
                        </li>
                    
                    </ul>
                </li>
                <!--
                smart menus
                <li><a href="#">User Guide <span class="caret"></span></a>
                    <ul class="dropdown-menu">
                    
                    
                        <li >
                            <a href="../../user-guide/installation/">Installation</a>
                        </li>
                    
                    
                    
                        <li >
                            <a href="../../user-guide/config/">Configuration</a>
                        </li>
                    
                    
                    
                        <li >
                            <a href="../../user-guide/storage-providers/">Storage Providers</a>
                        </li>
                    
                    
                    
                        <li >
                            <a href="../../user-guide/schedulers/">Schedulers</a>
                        </li>
                    
                    
                    
                        <li >
                            <a href="../../user-guide/applications/">Applications</a>
                        </li>
                    
                    
                    </ul>
                </li>
                -->
            
            
            
                <li class="dropdown active">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Developers Guide <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../project-guidelines/">Project Guidelines</a>
                        </li>
                    
                        <li >
                            <a href="../build-reference/">Build Reference</a>
                        </li>
                    
                        <li class="active">
                            <a href="./">Release Process</a>
                        </li>
                    
                    </ul>
                </li>
                <!--
                smart menus
                <li><a href="#">Developers Guide <span class="caret"></span></a>
                    <ul class="dropdown-menu">
                    
                    
                        <li >
                            <a href="../project-guidelines/">Project Guidelines</a>
                        </li>
                    
                    
                    
                        <li >
                            <a href="../build-reference/">Build Reference</a>
                        </li>
                    
                    
                    
                        <li class="active">
                            <a href="./">Release Process</a>
                        </li>
                    
                    
                    </ul>
                </li>
                -->
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">About <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../../about/contributing/">Contributing</a>
                        </li>
                    
                        <li >
                            <a href="../../about/license/">License</a>
                        </li>
                    
                        <li >
                            <a href="../../about/release-notes/">Release Notes</a>
                        </li>
                    
                    </ul>
                </li>
                <!--
                smart menus
                <li><a href="#">About <span class="caret"></span></a>
                    <ul class="dropdown-menu">
                    
                    
                        <li >
                            <a href="../../about/contributing/">Contributing</a>
                        </li>
                    
                    
                    
                        <li >
                            <a href="../../about/license/">License</a>
                        </li>
                    
                    
                    
                        <li >
                            <a href="../../about/release-notes/">Release Notes</a>
                        </li>
                    
                    
                    </ul>
                </li>
                -->
            
            
            </ul>

            <!-- Search, Navigation and Repo links -->
            <ul class="nav navbar-nav navbar-right">
                <li >
                    <a rel="next" href="../build-reference/">
                        <i class="fa fa-arrow-left"></i> Previous
                    </a>
                </li>
                <li >
                    <a rel="prev" href="../../about/contributing/">
                        Next <i class="fa fa-arrow-right"></i>
                    </a>
                </li>
                
                <li>
                    <a href="https://github.com/emccode/rexray.git">
                        
                            <i class="fa fa-github"></i>
                        
                        GitHub
                    </a>
                </li>
                
                <li>
                    <a href="https://emccode.github.io">
                        <i class="fa icon-emccode-logo"></i>
                    </a>
                </li>
            </ul>
        </div>
    </div>
</div>
        <div class="container ">
            <div class="col-md-3"><div id="sidenav" class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#release-process">Release Process</a></li>
        
            <li><a href="#project-stages">Project Stages</a>
            
            </li>
        
            <li><a href="#review-issues-pull-requests">Review Issues &amp; Pull Requests</a>
            
            </li>
        
            <li><a href="#prepare-release-notes">Prepare Release Notes</a>
            
            </li>
        
            <li><a href="#update-version-file">Update Version File</a>
            
            </li>
        
            <li><a href="#commit-pull-request">Commit &amp; Pull Request</a>
            
            </li>
        
            <li><a href="#tag-the-release">Tag the Release</a>
            
                <ul class="nav nav-stacked">
                
                <li><a href="#tag-format">Tag Format</a><!--
                -->
                </li>
                
                <li><a href="#tag-methods">Tag Methods</a><!--
                -->
                </li>
                
                <li><a href="#command-line">Command Line</a><!--
                -->
                </li>
                
                </ul>
            
            </li>
        
            <li><a href="#update-version-file-again">Update Version File (Again)</a>
            
            </li>
        
    
    </ul>
</div></div>
            <div class="col-md-9" role="main">

<h1 id="release-process">Release Process</h1>
<p>How to release REX-Ray</p>
<hr />
<h2 id="project-stages">Project Stages</h2>
<p>This project has three parallels stages of release:</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>unstable</code></td>
<td>The tip or HEAD of the <code>master</code> branch is referred to as <code>unstable</code></td>
</tr>
<tr>
<td><code>staged</code></td>
<td>A commit tagged with the suffix <code>-rc\d+</code> such as <code>v0.3.1-rc2</code> is a <code>staged</code> release. These are release candidates.</td>
</tr>
<tr>
<td><code>stable</code></td>
<td>A commit tagged with a version sans <code>-rc\d+</code> suffix such as <code>v0.3.1</code> is a <code>stable</code> release.</td>
</tr>
</tbody>
</table>
<p>There are no steps necessary to create an <code>unstable</code> release as that happens
automatically whenever an untagged commit is pushed to <code>master</code>. However, the
following workflow should be used when tagging a <code>staged</code> release candidate
or <code>stable</code> release.</p>
<ol>
<li>Review outstanding issues &amp; pull requests</li>
<li>Prepare release notes</li>
<li>Update the version file</li>
<li>Commit &amp; pull request</li>
<li>Tag the release</li>
<li>Update the version file (again)</li>
</ol>
<h2 id="review-issues-pull-requests">Review Issues &amp; Pull Requests</h2>
<p>The first step to a release is to review the outstanding
<a href="https://github.com/emccode/rexray/issues">issues</a> and
<a href="https://github.com/emccode/rexray/pulls">pull requests</a> that are tagged for
the release in question.</p>
<p>If there are outstanding issues requiring changes or pending pull requests to
be merged, handle those prior to tagging any commit as a release candidate or
release.</p>
<p>It is <strong>highly</strong> recommended that pull requests be merged synchronously after
rebasing each subsequent one off of the new tip of <code>master</code>. Remember, while
GitHub will update a pull request as in conflict if a change to <code>master</code>
results in a merge conflict with the pull request, GitHub will <strong>not</strong> force a
new build to spawn unless the pull request is actually updated.</p>
<p>At the very minimum a pull request's build should be re-executed prior to the
pull request being merged if <code>master</code> has changed since the pull request was
opened.</p>
<h2 id="prepare-release-notes">Prepare Release Notes</h2>
<p>Update the release notes at <code>.docs/about/release-notes.md</code>. This file is
project's authoritative changelog and should reflect new features, fixes, and
any significant changes.</p>
<p>The most recent, <code>stable</code> version of the release notes are always available
online at
<a href="http://rexray.rtfd.org/en/stable/about/release-notes/">REX-Ray's documentation site</a>.</p>
<h2 id="update-version-file">Update Version File</h2>
<p>The <code>VERSION</code> file exists at the root of the project and should be updated to
reflect the value of the intended release.</p>
<p>For example, if creating the first release candidate for version 0.3.1, the
contents of the <code>VERSION</code> file should be a single line <code>0.3.1-rc1</code> followed by
a newline character:</p>
<pre><code class="sh">$ cat VERSION
0.3.1-rc1
</code></pre>

<p>If releasing version 0.3.1 proper then the contents of the <code>VERSION</code> file
should be <code>0.3.1</code> followed by a newline character:</p>
<pre><code class="sh">$ cat VERSION
0.3.1
</code></pre>

<h2 id="commit-pull-request">Commit &amp; Pull Request</h2>
<p>Once all outstanding issues and pull requests are handled, the release notes
and version are updated, it's time to create a commit.</p>
<p>Please make sure that the changes to the release notes and version files are
a part of the same commit. This makes identifying the aspects of a release,
staged or otherwise, far easier for future developers.</p>
<p>A release's commit message can either be a reflection of the release notes or
something simple. Either way the commit message should have the following
subject format and first line in its body:</p>
<pre><code class="text">Release (Candidate) v0.3.1-rc1

This patch bumps the version to v0.3.1-rc1.
</code></pre>

<p>If the commit message is longer it should simply reflect the same information
from the release notes.</p>
<p>Once committed push the change to a fork and open a pull request. Even though
this commit marks a staged or official release, the pull request system is still
used to assure that the build completes successfully and there are no unforeseen
errors.</p>
<h2 id="tag-the-release">Tag the Release</h2>
<p>Once the pull request marking the <code>staged</code> or <code>stable</code> release has been merged
into <code>upstream</code>'s <code>master</code> it's time to tag the release.</p>
<h3 id="tag-format">Tag Format</h3>
<p>The release tag should follow a prescribed format depending upon the release
type:</p>
<table>
<thead>
<tr>
<th>Release Type</th>
<th>Tag Format</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>staged</code></td>
<td>vMAJOR.MINOR.PATCH-rc[0-9]</td>
<td>v0.3.1-rc1</td>
</tr>
<tr>
<td><code>stable</code></td>
<td>vMAJOR.MINOR-PATCH</td>
<td>v0.3.1</td>
</tr>
</tbody>
</table>
<h3 id="tag-methods">Tag Methods</h3>
<p>There are two ways to tag a release:</p>
<ol>
<li><a href="https://github.com/emccode/rexray/releases/new">GitHub Releases</a></li>
<li>Command Line</li>
</ol>
<h3 id="command-line">Command Line</h3>
<p>If tagging a release via the command line be sure to fetch the latest changes
from <code>upstream</code>'s <code>master</code> and either merge them into your local copy of
<code>master</code> or reset the local copy to reflect <code>upstream</code> prior to creating
any tags.</p>
<p>The following combination of commands can be used to create a tag for
0.3.1 Release Candidate 1:</p>
<pre><code class="sh">git fetch upstream &amp;&amp; \
  git checkout master &amp;&amp; \
  git reset --hard upstream/master &amp;&amp; \
  git tag -a -m v0.3.1-rc1 v0.3.1-rc1
</code></pre>

<p>The above example combines a few operations:</p>
<ol>
<li>The first command fetches the <code>upstream</code> changes</li>
<li>The local <code>master</code> branch is checked out</li>
<li>The local <code>master</code> branch is hard reset to <code>upstream/master</code></li>
<li>An annotated tag is created on <code>master</code> for <code>v0.3.1-rc1</code>, or 0.3.1 Release
     Candidate 1, with a tag message of <code>v0.3.1-rc1</code>.</li>
</ol>
<p>Please note that the third step will erase any changes that exist only in the
local <code>master</code> branch that do not also exist in the remote, upstream copy.
However, if the two branches are not equal this method should not be used to
create a tag anyway.</p>
<p>The above steps do not actually push the tag upstream. This is to allow for one
final review of all the changes before doing so since the appearance of a new,
annotated tag in the repository will cause the project's build system to
automatically kick off a build that will result in the release of a <code>staged</code> or
<code>stable</code> release. For <code>stable</code> releases the project's documentation will also be
updated.</p>
<p>Once positive everything looks good simply execute the following command to
push the tag to the <code>upstream</code> repository:</p>
<pre><code class="sh">git push upstream v0.3.1-rc1
</code></pre>

<h2 id="update-version-file-again">Update Version File (Again)</h2>
<p>After a release is tagged there is one final step involving the <code>VERSION</code> file.
The contents of the file should be updated to reflect the next, targeted release
so that the produced artifacts reflect the targeted version value and not a
value based on the last, tagged commit.</p>
<p>Following the above examples where version <code>v0.3.1-rc1</code> was just staged, the
<code>VERSION</code> file should be updated to indicate that 0.3.1 Release Candidate 2
(<code>0.3.1-rc2</code>) is the next, targeted release:</p>
<pre><code class="sh">$ cat VERSION
0.3.1-rc2
</code></pre>

<p>Commit the change to the <code>VERSION</code> file with a commit message similar to the
following:</p>
<pre><code class="text">Bumped active dev version to v0.3.1-rc2

This patch bumps the active dev version to v0.3.1-rc2.
</code></pre>

<p>Once the <code>VERSION</code> file change is committed, push the change and open a pull
request to merge into the project.</p></div>
        </div>

        <script src="../../js/jquery-1.10.2.min.js"></script>
        <script src="../../js/bootstrap-3.0.3.min.js"></script>
        <script src="../../js/highlight.pack.js"></script>
        <script src="../../js/base.js"></script>
        <!--
        <script src="../../.themes/yeti/js/base.js"></script>
        <script src="../../.themes/yeti/js/bootstrap-3.0.3.min.js"></script>
        <script src="../../.themes/yeti/js/highlight.pack.js"></script>
        <script src="../../.themes/yeti/js/jquery-1.10.2.min.js"></script>
        -->
    </body>

</html>